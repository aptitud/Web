<html>
<head>
    <script type="text/javascript" src="test.js"></script>
    <script type="text/javascript" src="../script/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="../script/animation.js"></script>
</head>
<body>
<script type="text/javascript">
    var AnimationTest = {
        testAnimate: function(ctx) {
            var count = 0;

            AnimationManager.getAnimationManager().animate(function() {
                return (++count <= 3);
            }, {
                onComplete: function() {
                    ctx.async.done();
                }
            });

            ctx.async.spinOff(1000);
        },

        testTimeout: function(ctx) {
            var animationTimedOut = false;
            var animation = function() { return true; };

            assertTrue(AnimationManager.getAnimationManager().animate(animation, {
                timeout: 200,
                onTimeout: function() {
                    ctx.async.done();
                }
            }));

            ctx.async.spinOff(500);
        },

        testAnimationShouldNotBeAcceptedIfAnimationIsInProgress: function() {
            AnimationManager.getAnimationManager().animate(function() {
                return true;
            }, { timeout: 100 });

            assertEquals(false, AnimationManager.getAnimationManager().animate(function() {}));

        }
    };
</script>
</body>
</html>